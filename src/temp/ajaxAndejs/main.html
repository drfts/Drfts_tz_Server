<!-- 일단 HTML 파일을 하나 생성해준다.
이 파일은 큰 기능은 갖고 있지 않다.
템플릿이 들어갈 result div 태그와, ajax요청을 할 버튼을 갖고 있다. -->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>test page</title>
  </head>
  <body>
    <h1>Hello world!<h1>
    <div class="result"></div> <!--템플릿이 들어갈 result div태그-->
    <button class="ajaxsend">ajax send</button> <!--ajax요청을 할 버튼등록-->                                                            
  </body>
  <script>
      document.querySelector('.ajaxsend').addEventListener("click",function(){
        sendAjax('http://localhost:3000/');
      })
      
      // sendAjax 함수는 url을 인자로 받아서 실행되는 함수다.
      //
      function sendAjax(url){
        var oReq = new XMLHttpRequest();//XMLHttpRequest란? Ajax로 실행되는 HTTP통신은 XMLHttpRequest규격을 이용하고 있다. 가장 기본통신으로 많이 사용되고 있는 규격이다.
        // Ajax(Asynchronos Javascript And XML)의 핵심인 XMLHttpRequest에 의한 송수신 흐름으로는,
        // 1. 사용자 쪽에서는 XMLHttpRequest 오브젝트 생성. => new XMLHttpReuqest()
        // 2. HTTP 요청 발생 => open()메소드(POST, GET, 요청할 URL, 동기/비동기 방식의 지정), send()메소드(데이터 송신)
        // 3. 서버 쪽에서는 
      
        oReq.open('POST', url);
        oReq.setRequestHeader('Content-Type', "application/json")                                        
        oReq.send();
      
        oReq.addEventListener('load', function(){
          var result = oReq.responseText;
          console.log(oReq.responseText)
          document.querySelector('.result').innerHTML = result
        })
      }
  </script><!-- main.js를 향함-->
</html>


<!-- 그리고선 자바스크립트 코드를 작성한다.
간단하게 버튼을 클릭하면, Ajax을 요청하는 이벤트를 등록해준다.
또한 Ajax로부터 들어온 HTML 데이터를 화면에 렌더링 시켜주도록 한다. -->
<!-- <script>
  document.querySelector('.ajaxsend').addEventListener("click",function(){
    sendAjax('http://localhost:3000/');
  })
   
  function sendAjax(url){
          var oReq = new XMLHttpRequest();
   
          oReq.open('POST', url);
          oReq.setRequestHeader('Content-Type', "application/json")                                        
          oReq.send();
   
          oReq.addEventListener('load', function(){
            var result = oReq.responseText;
            console.log(oReq.responseText)
            document.querySelector('.result').innerHTML = result
          })
  }
</script> -->
